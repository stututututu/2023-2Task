package setDb;

import db.DbManager;

public class SetDataBase {
	
	private DbManager db;

	public SetDataBase() {
		// TODO Auto-generated constructor stub
		db = new DbManager();
		
		db.setData("-- MySQL Script generated by MySQL Workbench\r\n"
				+ "-- Tue Feb 21 14:48:40 2023\r\n"
				+ "-- Model: New Model    Version: 1.0\r\n"
				+ "-- MySQL Workbench Forward Engineering\r\n"
				+ "\r\n"
				+ "SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;\r\n"
				+ "SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;\r\n"
				+ "SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Schema 4103\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "DROP SCHEMA IF EXISTS `4103` ;\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Schema 4103\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "CREATE SCHEMA IF NOT EXISTS `4103` DEFAULT CHARACTER SET utf8 ;\r\n"
				+ "USE `4103` ;\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Table `4103`.`user`\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "CREATE TABLE IF NOT EXISTS `4103`.`user` (\r\n"
				+ "  `u_no` INT(11) NOT NULL AUTO_INCREMENT,\r\n"
				+ "  `u_id` VARCHAR(20) NULL,\r\n"
				+ "  `u_pw` VARCHAR(20) NULL,\r\n"
				+ "  `u_name` VARCHAR(15) NULL,\r\n"
				+ "  `u_phone` VARCHAR(20) NULL,\r\n"
				+ "  `u_age` DATE NULL,\r\n"
				+ "  `u_10percent` INT(11) NULL,\r\n"
				+ "  `u_30percent` INT(11) NULL,\r\n"
				+ "  PRIMARY KEY (`u_no`))\r\n"
				+ "ENGINE = InnoDB;\r\n"
				+ "\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Table `4103`.`category`\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "CREATE TABLE IF NOT EXISTS `4103`.`category` (\r\n"
				+ "  `idcategory` INT NOT NULL AUTO_INCREMENT,\r\n"
				+ "  `c_name` VARCHAR(10) NULL,\r\n"
				+ "  PRIMARY KEY (`idcategory`))\r\n"
				+ "ENGINE = InnoDB;\r\n"
				+ "\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Table `4103`.`product`\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "CREATE TABLE IF NOT EXISTS `4103`.`product` (\r\n"
				+ "  `p_no` INT(11) NOT NULL AUTO_INCREMENT,\r\n"
				+ "  `c_no` INT(11) NULL,\r\n"
				+ "  `p_name` VARCHAR(20) NULL,\r\n"
				+ "  `p_price` INT(11) NULL,\r\n"
				+ "  `p_stock` INT(11) NULL,\r\n"
				+ "  `p_explantion` VARCHAR(150) NULL,\r\n"
				+ "  PRIMARY KEY (`p_no`),\r\n"
				+ "  INDEX `fk_product_category1_idx` (`c_no` ASC) VISIBLE,\r\n"
				+ "  CONSTRAINT `fk_product_category1`\r\n"
				+ "    FOREIGN KEY (`c_no`)\r\n"
				+ "    REFERENCES `4103`.`category` (`idcategory`)\r\n"
				+ "    ON DELETE NO ACTION\r\n"
				+ "    ON UPDATE NO ACTION)\r\n"
				+ "ENGINE = InnoDB;\r\n"
				+ "\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Table `4103`.`purchase`\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "CREATE TABLE IF NOT EXISTS `4103`.`purchase` (\r\n"
				+ "  `idpurchase` INT(11) NOT NULL AUTO_INCREMENT,\r\n"
				+ "  `p_no` INT(11) NULL,\r\n"
				+ "  `pu_price` INT(11) NULL,\r\n"
				+ "  `pu_count` INT(11) NULL,\r\n"
				+ "  `coupon` INT(11) NULL,\r\n"
				+ "  `u_no` INT(1) NULL,\r\n"
				+ "  `pu_date` DATE NULL,\r\n"
				+ "  PRIMARY KEY (`idpurchase`),\r\n"
				+ "  INDEX `fk_purchase_user_idx` (`u_no` ASC) VISIBLE,\r\n"
				+ "  INDEX `fk_purchase_product1_idx` (`p_no` ASC) VISIBLE,\r\n"
				+ "  CONSTRAINT `fk_purchase_user`\r\n"
				+ "    FOREIGN KEY (`u_no`)\r\n"
				+ "    REFERENCES `4103`.`user` (`u_no`)\r\n"
				+ "    ON DELETE NO ACTION\r\n"
				+ "    ON UPDATE NO ACTION,\r\n"
				+ "  CONSTRAINT `fk_purchase_product1`\r\n"
				+ "    FOREIGN KEY (`p_no`)\r\n"
				+ "    REFERENCES `4103`.`product` (`p_no`)\r\n"
				+ "    ON DELETE NO ACTION\r\n"
				+ "    ON UPDATE NO ACTION)\r\n"
				+ "ENGINE = InnoDB;\r\n"
				+ "\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Table `4103`.`attendance`\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "CREATE TABLE IF NOT EXISTS `4103`.`attendance` (\r\n"
				+ "  `a_no` INT(11) NOT NULL AUTO_INCREMENT,\r\n"
				+ "  `u_no` INT(11) NULL,\r\n"
				+ "  `a_date` DATE NULL,\r\n"
				+ "  PRIMARY KEY (`a_no`),\r\n"
				+ "  INDEX `fk_attendance_user1_idx` (`u_no` ASC) VISIBLE,\r\n"
				+ "  CONSTRAINT `fk_attendance_user1`\r\n"
				+ "    FOREIGN KEY (`u_no`)\r\n"
				+ "    REFERENCES `4103`.`user` (`u_no`)\r\n"
				+ "    ON DELETE NO ACTION\r\n"
				+ "    ON UPDATE NO ACTION)\r\n"
				+ "ENGINE = InnoDB;\r\n"
				+ "\r\n"
				+ "\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "-- Table `4103`.`coupon`123\r\n"
				+ "-- -----------------------------------------------------\r\n"
				+ "CREATE TABLE IF NOT EXISTS `4103`.`coupon` (\r\n"
				+ "  `c_no` INT(11) NOT NULL AUTO_INCREMENT,\r\n"
				+ "  `u_no` INT(11) NULL,\r\n"
				+ "  `c_date` VARCHAR(15) NULL,\r\n"
				+ "  `c_10percent` INT(11) NULL,\r\n"
				+ "  `c_30percent` INT(11) NULL,\r\n"
				+ "  PRIMARY KEY (`c_no`),\r\n"
				+ "  INDEX `fk_coupon_user1_idx` (`u_no` ASC) VISIBLE,\r\n"
				+ "  CONSTRAINT `fk_coupon_user1`\r\n"
				+ "    FOREIGN KEY (`u_no`)\r\n"
				+ "    REFERENCES `4103`.`user` (`u_no`)\r\n"
				+ "    ON DELETE NO ACTION\r\n"
				+ "    ON UPDATE NO ACTION)\r\n"
				+ "ENGINE = InnoDB;\r\n"
				+ "\r\n"
				+ "drop user if exists 'user'@'localhost';\r\n"
				+ "create user 'user'@'localhost' identified by '1234';\r\n"
				+ "grant select, insert,delete,update on 2023지방_2.* to 'user'@'localhost';\r\n"
				+ "\r\n"
				+ "set global local_infile = 1;\r\n"
				+ "\r\n"
				+ "SET SQL_MODE=@OLD_SQL_MODE;\r\n"
				+ "SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;\r\n"
				+ "SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;\r\n"
				+ "");
		db.setData("load data local infile './datafiles/division.txt' into table division ignore 1 lines;");
		db.setData("load data local infile './datafiles/book.txt' into table book ignore 1 lines;");
		db.setData("load data local infile './datafiles/user.txt' into table user ignore 1 lines;");
		db.setData("load data local infile './datafiles/rental.txt' into table rental ignore 1 lines;");
		db.setData("load data local infile './datafiles/likebook.txt' into table likebook ignore 1 lines;");
	}
}
