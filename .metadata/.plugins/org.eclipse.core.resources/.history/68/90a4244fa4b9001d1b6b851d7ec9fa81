package frames;

import java.awt.Color;
import java.awt.Dimension;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.border.LineBorder;
import javax.swing.table.DefaultTableModel;

import base.comp.BaseFrame;
import base.comp.BasePanel;
import base.comp.imageLabel;
import db.DbManager;

public class BookList extends BaseFrame {

	private DbManager db;
	private BaseLabel jlTitle;
	private JComboBox jcSearCh;
	private JTextField jtSearch;
	private JButton jbSearch;
	private Vector<Object> cols;
	private Vector<Vector<String>> data;
	private DefaultTableModel dtm;
	private JTable table;
	private JScrollPane scroll;
	private Vector<Vector<String>> book;
	private BasePanel jp;
	private JScrollPane bookScroll;

	public BookList() {
		// TODO Auto-generated constructor stub
		db = new DbManager();
		super.BaseFrame("도서목록", 805, 479);
	}

	@Override
	public void setComp() {
		// TODO Auto-generated method stub
		jlTitle = new BaseLabel("도서 목록").setTitle(30).setCenter();

		jcSearCh = new JComboBox<>();

		jtSearch = new JTextField(10);
		

		jbSearch = new JButton("검색");

		cols = new Vector<>();
		cols.add("분류");

		data = db.getData("SELECT d_name FROM 2023지방_2.division;");

		dtm = new DefaultTableModel(data, cols);

		table = new JTable(dtm);

		scroll = new JScrollPane(table);
		scroll.setPreferredSize(new Dimension(70, 80));
		
		
		book = db.getData("SELECT b_no, b_name FROM 2023지방_2.book;");
		
		jp = new BasePanel().setGrid(0, 4, 10, 10);
		
		
		for (int i = 0; i < book.size(); i++) {
			BasePanel jpTmp = new BasePanel();
			jpTmp.addChild();
			jpTmp.jpTop.add(new imageLabel(null, "book/"+book.get(i).get(0), 200, 200));
			jpTmp.jpBottom.add(new JLabel(book.get(i).get(1)));
			jp.add(jpTmp);
			jp.setBorder(5,5,5,5);
			jp.setBorder(new LineBorder(Color.black));
		}
		bookScroll = new JScrollPane(jp);
		
		
	}

	@Override
	public void setDesign() {
		// TODO Auto-generated method stub
		jpTop.addChild();
		jpTop.jpCenter.add(jlTitle);
		jpTop.jpBottom.setFlowRight().add(new JLabel("검색"));
		jpTop.jpBottom.add(jcSearCh);
		jpTop.jpBottom.add(jtSearch);
		jpTop.jpBottom.add(jbSearch);
		
		
		jpCenter.addChild();
		jpCenter.jpLeft.addChild();
		
		jpCenter.jpLeft.jpLeft.add(scroll);
		
		jpCenter.jpCenter.add(bookScroll);
		
		
		
		

	}

	@Override
	public void events() {
		// TODO Auto-generated method stub

	}

}
